<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html" 
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/view/templates/template.xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">


    <ui:param name="pageTitle" value="Presentation List"/>

    <ui:define name="content">


        <h:form id="mainform" styleClass="form-horizontal" onsubmit="return false;">
            
           
            <div class="row">
                <div class="span4">
                    <p:tree id="tree" value="#{presentationManager.root}" var="node" selection="#{presentationManager.selectedNode}" selectionMode="single">
                        <p:treeNode type="p">#{node.name}</p:treeNode>
                        <p:treeNode type="i">##{node.position} #{node.document}</p:treeNode>

                        <p:ajax event="select" listener="#{presentationManager.onNodeSelect}" update=":mainform:detailpanel"/>
                    </p:tree>
                </div>

                <div class="span6">
                    <h:panelGroup id="detailpanel">
                        <h:panelGroup id="isPresenation" rendered="#{not empty presentationManager.selectedPresentation}">

                            <fieldset>
                                <legend>Presentation:</legend>

                                #{presentationManager.selectedPresentation}

                            </fieldset>

                        </h:panelGroup>
                        
                        <h:panelGroup id="isPresItem" rendered="#{not empty presentationManager.selectedPresentationItem}">

                            <fieldset>
                                <legend>Presentation-Item:</legend>

                                #{presentationManager.selectedPresentationItem}
                                <h:inputText value="#{presentationManager.selectedPresentationItem.duration}">
                                    <f:ajax event="change"/>
                                </h:inputText>
                                
                                
                                
                                <h:commandButton styleClass="btn" >
                                    <i class="icon-edit"></i>
                                    <f:ajax onevent="click" listener="#{presentationManager.savePresentationItem}"/>
                                </h:commandButton>
                            </fieldset>

                        </h:panelGroup>
                    </h:panelGroup>
                </div>
            </div>

        </h:form>



        <h:form>

            <h:commandButton value="New" action="#{presentationManager.create()}"/>


            <h:dataTable value="#{presentationManager.model}" var="item" styleClass="table table-striped">
                <h:column>
                    <h:commandLink value="" styleClass="btn" title="edit" action="#{presentationManager.edit()}">
                        <i class="icon-edit"></i>
                    </h:commandLink>
                    <h:commandLink value="" styleClass="btn" title="delete" action="#{presentationManager.delete()}">
                        <i class="icon-remove"></i>
                    </h:commandLink>
                </h:column>
                <!--                <h:column>
                                    <f:facet name="header">Name</f:facet>
                                    <h:outputText value="#{item.name}"/>
                                </h:column>-->
                <h:column>
                    <f:facet name="header">Datecreated</f:facet>
                    <h:outputText value="#{item.dateCreated}">
                        <f:convertDateTime />
                    </h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">Last modified</f:facet>
                    <h:outputText value="#{item.lastModified}">
                        <f:convertDateTime/>
                    </h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">uuid</f:facet>
                    <h:outputText value="#{item.uuid}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Version</f:facet>
                    <h:outputText value="#{item.objectVersion}"/>
                </h:column>
            </h:dataTable>
        </h:form>

    </ui:define>
</ui:composition>